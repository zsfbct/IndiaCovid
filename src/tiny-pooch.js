(function(){pooch={version:"0.1.0",author:"Jeremy White"},pooch.chart=function(a){return new __chart(a)},pooch.data=function(a){return new __data(a)},pooch.fetch=function(a){return new __fetch(a)},pooch.log=function(a){window.console&&window.console.log&&console.log(a)},pooch.map=function(a,b){return new pooch_map(a,b)},pooch.popup=function(a){return new __popup(a)},pooch.symbolGroup=function(a){return new __symbolGroup(a)},pooch.zoomControl=function(a){return new __zoomControl(a)},pooch.supportsCanvas=!!document.createElement("canvas").getContext;var __chart=function(a){var b=this,c=[],d=0,e=0,f=null,h="chart"+_chartNdx,j=1,k=1,l=!1,m=0,n=100,o=0,p=100,q={minX:0,maxX:100,minY:0,maxY:100},r={x:1,y:1},s=0,t=[1,2,4,8,16],u=1,v=1,w=!1,x={x:50,y:50},y=0,z=0,A=!1,B=!1,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=!1,M=!1,N=!1,O=null,P=null,Q=!1,R=2*Math.PI,S=[],T=[],U=null,V=null,W="over",X=null,Y=[],Z=[{_container:"div"}],$=[{_highlightMain:"canvas"},{_main:"canvas"},{_highlightBack:"canvas"},{_back:"canvas"},{_base:"div"}],_=[{_mouse:"div"},{_popup:"div"}],ab=function(a){var b=pooch.helpers.keyFromObj(a),c=0===a[b]?0:"px",f={},g=Y.length,i=Z.length,j=$.length,k=_.length;if(f[b]=a[b]+c,pooch.supportsCanvas)for(;g--;)Y[g].width=3*e,Y[g].style.width=3*e+"px",Y[g].height=3*d,Y[g].style.height=3*d+"px";for(;i--;){var l=pooch.helpers.keyFromObj(Z[i]),m=pooch.fetch("#pooch"+l+"_"+h);m.css(f).dom()[b]=a[b]}if(pooch.supportsCanvas)for(;j--;){var n=pooch.helpers.keyFromObj($[j]);pooch.fetch("#pooch"+n+"_"+h).css(f).dom()[b]=a[b]}for(;k--;){var o=pooch.helpers.keyFromObj(_[k]);pooch.fetch("#pooch"+o+"_"+h).css(f).dom()[b]=a[b]}},bb=function(a){var b=pooch.fetch("#pooch_popup_"+h).dom();a(b)},cb=function(a,b,c,d,e){V&&b[c]===V[c]||(a.popup().layout(c),db(a,d,e))},db=function(a,b,c){var f=0,g=0,h=b-e,i=c-d,j=a.popup().offsetX(),k=a.popup().offsetY(),l=a.popup().width(),m=a.popup().height();g=0>i-m-k-2?k:-m-k,f=0>h+j-l/2-2?-h+2:h+j+l/2+2>e?e-(h+l)-2:j+l/-2,a.popup().x(h+f).y(i+g)},fb=function(a,b){for(var c=function(a,b){for(var c=!1,d=-1,e=a.length,f=e-1;e>++d;f=d)(a[d][1]<=b[1]&&b[1]<a[f][1]||a[f][1]<=b[1]&&b[1]<a[d][1])&&b[0]<(a[f][0]-a[d][0])*(b[1]-a[d][1])/(a[f][1]-a[d][1])+a[d][0]&&(c=!c);return c},d=a.length;d--;)if(c(a[d],b))return!0;return!1},gb=function(a,b){if(!b){var c=a.localX+e,g=a.localY+d,h=!1,i=!1,l=[],m=[],n=0,o=T.length,p=3*e,q=null,r=null;if(!M){for(var s=0;o>s;++s)if(T[s].interactive()){var t=T[s].state();for(var u in t){var v=0,w=0;switch(t[u].shape){case"circle":v=t[u].size,w=t[u].size;break;case"rect":case"hex":v=t[u].width/2,w=t[u].height/2;break;case"poly":h=fb(t[u].shapePoints,[c,g]);break;case"custom":h=T[s].customShape().hitTest(t[u],{x:-c,y:-g});break;default:}if("over"===W){var x=T[s].map(),y=x?t[u].lng:t[u].x,z=x?t[u].lat:t[u].y;(h||y+v>c&&c>y-v&&z+w>g&&g>z-w)&&(l[n]=T[s],m[n]=t[u],i=!0,n++)}else"closest"===W&&(l[n]=T[s],m[n]=t[u],i=!0,n++)}}var A=m.length;if(i){for(;A--;)if(m[A].drawFill){var B=pooch.helpers.distanceToPoint(m[A].x,m[A].y,c,g);p>=B&&(q=l[A],r=m[A],p=B)}var C=q,E=r;if(V!==E&&E){U&&(U.popup()&&U.popup().hide(),"MAIN"===U.layer().toUpperCase()?mb(F,0,0,e,d):mb(D,0,0,e,d));var G={},H="MAIN"===C.layer().toUpperCase()?"highlightMain":"highlightBack";U=C,V=E,G[V.poochID]=V,j=k=1,U.popup()&&cb(U,U.state(),V.poochID,c,g),pooch.fetch(f).css({cursor:"pointer"}),lb(null,H,{obj:U,key:G})}else V===E&&E&&U.popup()&&db(C,c,g)}else V&&(U.popup()&&U.popup().hide(),pooch.fetch(f).css({cursor:"default"}),"MAIN"===U.layer().toUpperCase()?mb(F,0,0,e,d):mb(D,0,0,e,d)),U=null,V=null}}},hb=function(a,b,c,d){var e=a.datum(b),f=a.state(),g=a.data().datum(),h=a.symAttrs(),i=a.frameCalculation();if(1===c||i){e.changeList={};for(var j in a.changeList())e.changeList[j]="function"==typeof h[j]?h[j](e,g[b]):null!==h[j]?h[j]:e[j]}for(var k in a.changeList()){var l=a.stepFunc(k);e[k]=i?e.changeList[k]:l(f[b][k],e.changeList[k],c,d,e.easing)}},ib=function(a,b,c,f){var g=a.datum(b),h=a.map(),i=h?g.lng:g.x,j=h?g.lat:g.y,k=l?i>>0:i,m=l?j>>0:j;switch(f&&(k-=e,m-=d),g.shape){case"circle":var n=l?g.size>>0:g.size;c.arc(k+y,m+z,n,0,R,!1);break;case"rect":var o=l?g.width>>0:g.width,p=l?g.height>>0:g.height,q=l?g.width/2>>0:g.width/2,r=l?g.height/2>>0:g.height/2;c.rect(k-q+y,m-r+z,o,p);break;case"bezcurve":break;case"line":c.moveTo(k+y,m+y);var s=a.datum(b).order,t=s>0?a.state(a.order()[s-1]):a.datum(b);c.lineTo(t.x+y,t.y+z);break;case"linkLine":c.moveTo(k+y,m+y);var u=a.datum(b).link||g;c.lineTo(u.x+y,u.y+z);break;case"hex":var v=l?g.width/2>>0:g.width/2,w=l?g.height/2>>0:g.height/2,x=l?v/2>>0:v/2;c.moveTo(k-x+y,m-w+z),c.lineTo(k+x+y,m-w+z),c.lineTo(k+v+y,m+z),c.lineTo(k+x+y,m+w+z),c.lineTo(k-x+y,m+w+z),c.lineTo(k-v+y,m+z),c.lineTo(k-x+y,m-w+z);break;case"poly":for(var A=g.shapePoints,B=A.length;B--;){var C=A[B].length-1,D=f?A[B][C][0]-e:A[B][C][0],E=f?A[B][C][1]-d:A[B][C][1];for(c.moveTo(D,E);C--;){var F=f?A[B][C][0]-e:A[B][C][0],G=f?A[B][C][1]-d:A[B][C][1];c.lineTo(F,G)}}break;case"custom":var H=f?y-e:y,I=f?z-d:z;a.customShape().process(g,{x:H,y:I});break;default:var J=l?g.size>>0:g.size;c.arc(k+y,m+z,J,0,R,!1)}},jb=function(a,b,c,d){var e=a.datum(b);if(pooch.supportsCanvas){var f=d?e.drawFillHighlight:e.drawFill,g=d?e.fillColorHighlight:e.fillColor,h=d?e.fillOpacityHighlight:e.fillOpacity,i=d?e.drawStrokeHighlight:e.drawStroke,j=d?e.strokeWidthHighlight:e.strokeWidth,k=d?e.strokeColorHighlight:e.strokeColor,l=d?e.strokeOpacityHighlight:e.strokeOpacity;f&&(c.fillStyle="rgba("+g+", "+h+")"),i&&(c.lineWidth=j,c.strokeStyle="rgba("+k+", "+l+")"),ib(a,b,c,d)}},kb=function(a,b,c){var f="",g=c?e:0,h=c?d:0,i=c?e:3*e,j=c?d:3*d;if(a){f=a.toUpperCase();var o=b?!0:!1,p=o?"HIGHLIGHTMAIN"===f?F:D:"MAIN"===f?E:C,q=o?null:"MAIN"===f?G:I;mb(p,0,0,e,d),null!==q&&mb(q,g,h,i,j)}else for(var k=T.length,l=!1,m=!1,n=!1;k--;)switch(f=T[k].layer().toUpperCase()){case"BACK":m||(m=!0,mb(C,0,0,e,d),mb(D,0,0,e,d),mb(I,g,h,i,j));break;case"MAIN":l||(l=!0,mb(E,0,0,e,d),mb(F,0,0,e,d),mb(G,g,h,i,j));break;default:n||(n=!0,mb(F,0,0,e,d),mb(D,0,0,e,d))}},lb=function(a,b,c,g){clearTimeout(X),(a===void 0||null===typeof a||isNaN(a))&&(k=1);var h=c?!0:!1,i=h?1:T.length,l=k>j;if(K=!0,A=h?A:!1,B=h?B:!1,f){pooch.supportsCanvas&&kb(b,c,l);for(var m=0;i>m;++m){var n=h?c.obj:T[m],o=n.layer().toUpperCase(),p=!0;if(p){var q=h?c.key:n.datum(),r=h?[pooch.helpers.keyFromObj(c.key)]:n.order(),s=h?1:r.length,t=n.shape().toUpperCase(),u=h?"MAIN"===o?F:D:"MAIN"===o?G:I,v="CUSTOM"===t?!0:!1,w=n.batch()?!0:!1;if(u===G?B=!0:u===I&&(A=!0),n.context(u),P&&(n.changeList().shapePoints=null),w&&!h){var x=n.batchObj();w.length;for(var z in x){var L=x[z].length;for(v||u.beginPath();L--;){var M=x[z][L];hb(n,M,j,k),jb(n,M,u,h)}v||u.fill(),v||u.stroke()}}else for(var N=0;s>N;++N){v||u.beginPath(),hb(n,r[N],j,k),jb(n,r[N],u,h);var Q=h?q[r[N]].drawFillHighlight:q[r[N]].drawFill,R=h?q[r[N]].drawStrokeHighlight:q[r[N]].drawStroke;Q&&!v&&u.fill(),R&&!v&&u.stroke()}j===k&&n.changeList({})}}if((B||A)&&!h){var S=e,U=d,V=e,W=d,Y=0,Z=0,$=e,_=d;B&&E.drawImage(H,S,U,V,W,Y,Z,$,_),A&&C.drawImage(J,S,U,V,W,Y,Z,$,_)}if(j++,k>=j&&k>1)X=setTimeout(function(){lb(k,b,null,g)},1);else{!pooch.supportsCanvas,j=1;for(var ab=T.length;ab--;)h||T[ab].state(!0);O&&O.update(),K=!1,"function"==typeof g&&g()}}},mb=function(a,b,c,d,e){a&&a.clearRect(b,c,d,e)},nb=function(){r.x=(n-m)/e,r.y=(p-o)/d},ob=function(){x.x=m+(n-m)/2,x.y=o+(p-o)/2},pb=function(a){var b=!1,c=0,f=0,g={elem:null,init:function(){a.onmousedown=g.start,window.navigator.msPointerEnabled?(a.addEventListener("MSPointerDown",g.start,!1),a.style.msTouchAction!==void 0&&(a.style.msTouchAction="none")):a.attachEvent&&a.setCapture?(b=!0,a.attachEvent("onmousedown",function(){return g.start(window.event),window.event.returnValue=!1,!1})):a.addEventListener&&(a.addEventListener("touchstart",g.start,!1),a.addEventListener("mousedown",g.start,!1))},start:function(d){if(N=!0,U){var e=U.layer().toUpperCase(),h="MAIN"===e?"highlightMain":"highlightBack";U.popup()&&U.popup().hide(),kb(h,!0),U=V=null}return g.elem=this,d=d?d:window.event,g.elem.mouseX=d.clientX,g.elem.mouseY=d.clientY,c=0,f=0,window.navigator.msPointerEnabled?(document.addEventListener("MSPointerDown",g.start,!1),a.style.msTouchAction!==void 0&&(a.style.msTouchAction="none")):a.attachEvent&&a.setCapture?(b=!0,document.attachEvent("onmousemove",function(){return g.active(window.event),window.event.returnValue=!1,!1}),document.attachEvent("onmouseup",function(){return g.end(window.event),window.event.returnValue=!1,!1})):a.addEventListener&&(document.addEventListener("touchmove",g.active,!1),document.addEventListener("touchend",g.end,!1),document.addEventListener("touchcancel",g.end,!1),document.addEventListener("touchleave",g.end,!1),document.addEventListener("mousemove",g.active,!1),document.addEventListener("mouseup",g.end,!1),a.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(b=!0)),!1},active:function(a){if(a.preventDefault(),g.elem){N=!0,a=a.changedTouches?a.changedTouches:[a];var b=a[0].clientX-g.elem.mouseX,h=a[0].clientY-g.elem.mouseY;c+=isNaN(b)?0:b,f+=isNaN(h)?0:h;var i=0>e-c?0:e-c,j=0>d-f?0:d-f,k=0>e-c?-(e-c):0,l=0>d-f?-(d-f):0,m=3*e,n=3*d,o=i+e>m?m-(i+e-e):e,p=j+d>n?n-(j+d-d):d;B&&(mb(E,0,0,e,d),E.drawImage(H,i,j,o,p,k,l,o,p)),A&&(mb(C,0,0,e,d),C.drawImage(J,i,j,o,p,k,l,o,p)),g.elem.mouseX=a[0].clientX,g.elem.mouseY=a[0].clientY}return!1},end:function(){if(null!==g.elem){N=!1;var a=c*r.x,d=f*r.y;if(m-=a,n-=a,o+=d,p+=d,ob(),0!==c||0!==f){c=0,f=0;for(var e=T.length;e--;)T[e].shapeData()?T[e].changeList().shapePoints=null:(T[e].changeList().x=null,T[e].changeList().y=null);lb()}b?document.releaseCapture():(document.removeEventListener("mousemove",g.active,!1),document.removeEventListener("mouseup",g.end,!1),document.removeEventListener("touchmove",g.active,!1),document.removeEventListener("touchend",g.end,!1),document.removeEventListener("touchcancel",g.end,!1),document.removeEventListener("touchleave",g.end,!1)),g.elem=null}}};g.init()},qb=function(){return 0},rb=function(){return t.length-1},sb=function(a){if(!arguments.length)return b;if(a.val instanceof Array){for(var c=P?!0:!1,f=[],g=a.val.length,h=m-(n-m),i=n+(n-m),j=o-(p-o),k=p+(p-o);g--;){var q=a.val[g].length;f[g]=[];for(var r=!0;q--;){f[g][q]=[];var s=a.val[g][q][0],t=a.val[g][q][1],u=c?P(s,t,r):{x:s,y:t},v=3*e*((u.x-h)/(i-h)),w=3*d-3*d*((u.y-j)/(k-j));f[g][q][0]=l?v>>0:v,f[g][q][1]=l?w>>0:w,r=!1}}return f}var E,x="width"===a.dim,y=x?3*e:3*d,z=n-m,A=p-o,B=x?m-z:o-A,C=x?n+z:p+A,D="function"==typeof a.val?a.val(a.sym,a.data):a.val;return E=x?y*((D-B)/(C-B)):y-y*((D-B)/(C-B))};b.fit=function(a){return sb(a)},b.bounds=function(a){if(!arguments.length)return c;if(a.length)b.axisMinX(a[3]),b.axisMaxX(a[1]),b.axisMinY(a[2]),b.axisMaxY(a[0]),c=[a[0],a[1],a[2],a[3]],q={minX:a[3],maxX:a[1],minY:a[2],maxY:a[0]},nb(),ob();else{var f=a.data().datum(),g=Number.MAX_VALUE,h=Number.MIN_VALUE,i=g,j=g,k=h,l=h;for(var m in f)for(var n=f[m][a.shapeData()],o=n?n.length:0;o--;)for(var p=n[o].length;p--;){var r=n[o][p][0],s=n[o][p][1];i>r&&(i=r),r>k&&(k=r),s>l&&(l=s),j>s&&(j=s)}var t=d/e,u=Math.abs(l-j)/Math.abs(k-i);if(u>t){var v=(k-i)*(u-t),w=v/2;i-=w,k+=w}else if(t>u){var x=(l-j)*(t-u),y=x/2;j-=y,l+=y}b.axisMinX(i),b.axisMaxX(k),b.axisMinY(j),b.axisMaxY(l),c=[l,k,j,i],q={minX:i,maxX:k,minY:j,maxY:l},nb(),ob()}return b},b.symbolGroup=function(a){if(!arguments.length)return T;for(var c=a.length,d=!1,e=0;c>e;++e)T[e]=a[e],T[e].chart(b,sb),T[e].state(!0),f?(T[e].popup()&&bb(T[e].popup().house),!d&&T[e].interactive()&&(b.mouseMove(gb),b.mouseOut(gb),d=!0)):(S.push({func:bb,arg:T[e].popup().house}),S.push({func:b.mouseMove,arg:gb}),S.push({func:b.mouseOut,arg:gb}));return b},b.stepCount=function(a){return arguments.length?(j=a,b):j},b.stepTotal=function(a){return arguments.length?(k=a,b):k},b.width=function(a){return arguments.length?(e=a,f?ab({width:e}):S.push({func:ab,arg:{width:e}}),b):e},b.height=function(a){return arguments.length?(d=a,f?ab({height:d}):S.push({func:ab,arg:{height:d}}),b):d},b.axisMinX=function(a){return arguments.length?(m=a,b):m},b.axisMaxX=function(a){return arguments.length?(n=a,b):n},b.axisMinY=function(a){return arguments.length?(o=a,b):o},b.axisMaxY=function(a){return arguments.length?(p=a,b):p},b.baseAPI=function(a){return arguments.length?(_baseAPI=a,pooch.map("#pooch_base_chart0").api("google").chart(b).defaultView({lat:37.090238,lng:-95.7129,zoom:4}),b):_baseAPI},b.projection=function(a){return arguments.length?(null===a&&(P=null),"function"==typeof a&&(P=a),b):P},b.reset=function(){return f&&!w&&(m=q.minX,n=q.maxX,o=q.minY,p=q.maxY,ob(),b.zoom(0)),b},b.zoomControl=function(a){return arguments.length?(O=a,O.target(b,qb,rb),f.appendChild(O.domElem()),O.house(f),pb(pooch.fetch("#pooch_container_"+h).dom()),O.update(),b):O},b.zoomIn=function(){return f&&!w&&t.length>s+1&&b.zoom(s+1),b},b.zoomOut=function(){return f&&!w&&(0===s-1?b.reset():s-1>=0&&b.zoom(s-1)),b},b.zoom=function(a){if(!arguments.length)return s;if(v>1&&s!==a&&0!==a)u=1,tb(s,a);else{s=a,m=x.x-(q.maxX-q.minX)/2/t[s],n=x.x+(q.maxX-q.minX)/2/t[s],o=x.y-(q.maxY-q.minY)/2/t[s],p=x.y+(q.maxY-q.minY)/2/t[s],ob(),nb();for(var c=T.length;c--;)T[c].shapeData()?T[c].changeList().shapePoints=null:(T[c].changeList().x=null,T[c].changeList().y=null);w=!1,lb()}return b},b.zoomSteps=function(a){return arguments.length?(v=a,b):v},b.refresh=function(a){return arguments.length||(a={x:0,y:0,width:e,height:d}),B?(E.clearRect(0,0,e,d),E.drawImage(H,a.x+e,a.y+d,a.width,a.height,0,0,e,d)):A&&(C.clearRect(0,0,e,d),C.drawImage(J,a.x+e,a.y+d,a.width,a.height,0,0,e,d)),b};var tb=function(a,c){w=!0;var f=t[c]-t[a],g=u,h=f*((g=g/v-1)*g*g+1)+t[a],i=t[a]/h,j=e*i,k=d*i,l=(e-j)/2,m=(d-k)/2;j>0&&k>0&&l>0-e&&3*e>l&&m>0-d&&3*d>m?(b.refresh({x:l,y:m,width:j,height:k}),u++):u=v+2,v>=u-1?X=setTimeout(function(){tb(a,c)},30):(u=1,s=c,b.zoom(s))};return b.zoomLevels=function(a){return arguments.length?(t=a,b):t},b.draw=function(a,c,d){return j=1,k=arguments.length?a:1,f?lb(a,c,null,d):S.push({func:_drawSym,arg:null}),b},b.mouseIgnore=function(a){return arguments.length?(Q=a,b):Q},b.mouseMove=function(a){if("function"==typeof a){var c=function(b){var c=function(){return K||N||Q||w}();a(b,c)};f?pooch.fetch("#pooch_mouse_"+h).mouseMove(c):S.push({func:a,arg:c})}return b},b.mouseOver=function(a){return"function"==typeof a&&(f?pooch.fetch("#pooch_mouse_"+h).mouseOver(a):S.push({func:b.mouseOver,arg:a})),b},b.mouseDown=function(a){return"function"==typeof a&&(f?pooch.fetch("#pooch_mouse_"+h).mouseDown(a):S.push({func:b.mouseDown,arg:a})),b},b.mouseOut=function(a){if("function"==typeof a){var c=function(){gb({localX:-2e4,localY:-2e4})};f?pooch.fetch("#pooch_mouse_"+h).mouseOut(c):S.push({func:b.mouseOut,arg:a})}return b},b.activeSymbol=function(a){return arguments.length?(null===a&&(V&&V.symbolGroup.popup()&&V.symbolGroup.popup().hide(),V&&"MAIN"===V.symbolGroup.layer().toUpperCase()?mb(F,0,0,e,d):mb(D,0,0,e,d)),V=a,b):V},b.house=function(a){if(!arguments.length)return f;var c=pooch.fetch(a).dom();if(c){f=c;for(var g=[],i="",j=Z.length,k=$.length,l=_.length;j--;){var m=pooch.helpers.keyFromObj(Z[j]);i=Z[j][m],g.push("<"+Z[j][m]+" id='pooch"+m+"_"+h+"' width='"+e+"' height='"+d+"' style='position:relative;top:0;left:0;width:"+e+"px;height:"+d+"px;'>")}if(pooch.supportsCanvas){for(;k--;){var n=pooch.helpers.keyFromObj($[k]);g.push("<"+$[k][n]+" id='pooch"+n+"_"+h+"' width='"+e+"' height='"+d+"' style='position:absolute;top:0;left:0;width:"+e+"px;height:"+d+"px;'></"+$[k][n]+">")}J=document.createElement("canvas"),J.id="poochCvsBackHdn_"+h,J.width=e,J.height=d,J.style.width=e+"px",J.style.height=d+"px",I=J.getContext("2d"),H=document.createElement("canvas"),H.id="poochCvsMainHdn_"+h,H.width=e,H.height=d,H.style.width=e+"px",H.style.height=d+"px",G=H.getContext("2d"),Y=[J,H]}for(;l--;){var o=pooch.helpers.keyFromObj(_[l]);g.push("<"+_[l][o]+" id='pooch"+o+"_"+h+"' width='"+e+"' height='"+d+"' style='position:absolute;top:0;left:0;width:"+e+"px;height:"+d+"px;'></"+_[l][o]+">")}g.push("</"+i+">");var p=g.join("");f.innerHTML=p,C=pooch.fetch("#pooch_back_"+h).dom().getContext("2d"),E=pooch.fetch("#pooch_main_"+h).dom().getContext("2d"),F=pooch.fetch("#pooch_highlightMain_"+h).dom().getContext("2d"),D=pooch.fetch("#pooch_highlightBack_"+h).dom().getContext("2d"),h="chart"+_chartNdx++;for(var q=S.length;q--;)S[q].func(S[q].arg);S=[]}return b},arguments.length&&void 0!==a?(b.house(a),b):b},__symbolGroup=function(a){var b=this,c=function(a,b){return b},d=function(a,b){return b},e=function(a,b,c,d,e){if(!d||1===d||c===d)return b;var f=a.split(","),g=b.split(","),h=I(0|f[0],0|g[0],c,d,e)>>0,i=I(0|f[1],0|g[1],c,d,e)>>0,j=I(0|f[2],0|g[2],c,d,e)>>0;return h+","+i+","+j},f=function(a){var b=a+"_pooch_proj_y";for(var c in o.datum())o.datum()[c][b]=pooch.helpers.latToMercator(o.datum()[c][a]);J.lat=function(a,c){return w({dim:"height",val:c[b]})}},g=function(a){var b=a+"_pooch_proj_x";for(var c in o.datum())o.datum()[c][b]=pooch.helpers.lngToMercator(o.datum()[c][a]);J.lng=function(a,c){return w({dim:"width",val:c[b]})}},h=function(){B={};for(var a in m){var c="string"==typeof b.fillColor()?b.fillColor():b.fillColor()(m[a],o.datum()[a]);B.hasOwnProperty(c)?B[c].push(m[a].poochID):B[c]=[m[a].poochID]}return B},i=function(a){if(!arguments.length)return b;var c=a.length;for(m={};c--;){var d=a[c];m[d]={};for(var e in J)m[d][e]=J[e];m[d].poochID=d,r[c]=d,m[d].order=c}return b},j=function(a,c){return c===void 0?J[a]:(J[a]=k(c)?function(a,b){return b[c]}:c,F[a]=null,b)},k=function(a){var b=null;for(var c in o.datum()){b=c;break}return"string"==typeof a&&o.datum(b)[a]!==void 0},l=function(){return!1};b.drawFill=function(a){return j("drawFill",a)},b.drawStroke=function(a){return j("drawStroke",a)},b.drawFillHighlight=function(a){return j("drawFillHighlight",a)},b.fillColorHighlight=function(a){return j("fillColorHighlight",a)},b.fillOpacityHighlight=function(a){return j("fillOpacityHighlight",a)},b.drawStrokeHighlight=function(a){return j("drawStrokeHighlight",a)},b.strokeWidthHighlight=function(a){return j("strokeWidthHighlight",a)},b.strokeColorHighlight=function(a){return j("strokeColorHighlight",a)},b.strokeOpacityHighlight=function(a){return j("strokeOpacityHighlight",a)},b.size=function(a){return j("size",a)},b.fillOpacity=function(a){return j("fillOpacity",a)},b.strokeOpacity=function(a){return j("strokeOpacity",a)},b.strokeColor=function(a){return j("strokeColor",a)},b.strokeWidth=function(a){return j("strokeWidth",a)},b.shape=function(a){return arguments.length?l(J.shape=a)||b:J.shape},b.order=function(a){return arguments.length?l(r=a)||b:r},b.layer=function(a){return arguments.length?l(s=a)||b:s},b.easing=function(a){return arguments.length?l(J.easing=a)||b:J.easing},b.interactive=function(a){return arguments.length?l(C=a)||b:C},b.batch=function(a){return arguments.length?l(x=a)||b:x},b.map=function(a){return arguments.length?l(D=a)||b:D},b.context=function(a){return arguments.length?l(q=a)||b:q},b.changeList=function(a){return arguments.length?l(F=a)||b:F},b.customShape=function(a){return arguments.length?l(A=a)||b:A},b.frameCalculation=function(a){return arguments.length?l(z=a)||b:z},b.sort=function(a,c){return o&&r.sort(function(b,d){var e=m[c?d:b][a],f=m[c?b:d][a];return f-e}),b},b.data=function(a){if(!arguments.length)return o;o=a,i(o.keys());for(var c=G.length;c--;)G[c].func(G[c].arg);return G=[],b},b.chart=function(a,c){return arguments.length?(v=a,w=c,b):v},b.symAttrs=function(a){if(!arguments.length)return J;for(var c in a)J[c]=a[c];return b},b.datum=function(a){return arguments.length?m[a]:m},b.stepFunc=function(a){return arguments.length?K[a]:K},b.popup=function(a){return arguments.length?(p=a,p.data(b,o),C=!0,b):p},b.shapeData=function(a){return arguments.length?("string"==typeof a&&(E=a),b):E},b.fillColor=function(a){return arguments.length?(J.fillColor=a,y=!0,F.fillColor=null,b):J.fillColor},b.width=function(a){return arguments.length?(J.width=k(a)?function(b,c){return c[a]}:a,F.width=null,b):J.width},b.height=function(a){return arguments.length?(J.height=k(a)?function(b,c){return c[a]}:a,F.height=null,b):J.height},b.batchObj=function(a){return arguments.length?(B=a,b):(y&&(B=h(),y=!1),B)},b.x=function(a){return arguments.length?(J.x=k(a)?function(b,c){return w({dim:"width",val:c[a]})}:function(b,c){return w({dim:"width",val:a,sym:b,data:c})},F.x=null,b):J.x},b.y=function(a){return arguments.length?(J.y=k(a)?function(b,c){return w({dim:"height",val:c[a]})}:function(b,c){return w({dim:"height",val:a,sym:b,data:c})},F.y=null,b):J.y},b.lat=function(a){return arguments.length?("string"==typeof a?o?f(a):G.push({func:f,arg:a}):J.lat=pooch.helpers.latToMercator(a),F.lat=null,b):J.lat},b.lng=function(a){return arguments.length?("string"==typeof a?o?g(a):G.push({func:g,arg:a}):J.lng=pooch.helpers.lngToMercator(a),F.lng=null,b):J.lng},b.shapePoints=function(a){return arguments.length?("string"==typeof a?(b.shapeData(a),o?J.shapePoints=function(b,c){return w({sym:b,val:c[a]})}:G.push({func:b.shapePoints,arg:a})):J.shapePoints=a,F.shapePoints=null,b):J.shapePoints},b.state=function(a){if(!arguments.length)return H;if(1===arguments.length&&H[a]!==void 0)return H[a];for(var b in m){H[b]={};for(var c in J)H[b][c]=m[b][c];H[b].poochID=b}return H};var q,m={},o=([Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE,Number.MAX_VALUE],null),p=null,r=[],s="main",v=null,w=null,x=!1,y=!1,z=!1,A=null,B={},C=!1,D=null,E="",F={},G=[],H={},I=pooch.helpers.valueTween,J={symbolGroup:b,x:0,y:0,lat:0,lng:0,visible:!0,shape:"circle",easing:"easeInOut",drawFill:!0,drawStroke:!0,size:6,height:6,width:6,fillColor:"200,200,200",fillOpacity:1,strokeColor:"255,255,255",strokeOpacity:1,strokeWidth:1,shapePoints:[],drawFillHighlight:!0,fillColorHighlight:"200,200,200",fillOpacityHighlight:1,drawStrokeHighlight:!0,strokeWidthHighlight:1,strokeColorHighlight:"0,0,0",strokeOpacityHighlight:1},K={symbolGroup:c,poochID:c,order:c,x:I,y:I,lat:I,lng:I,visible:c,shape:c,easing:c,drawFill:c,drawStroke:c,size:I,height:I,width:I,fillColor:e,fillOpacity:I,strokeColor:e,strokeOpacity:I,strokeWidth:I,shapePoints:d,drawFillHighlight:c,fillColorHighlight:c,fillOpacityHighlight:c,drawStrokeHighlight:c,strokeWidthHighlight:c,strokeColorHighlight:c,strokeOpacityHighlight:c};return arguments.length?(b.shape(a),b):b},__zoomControl=function(a){var b=this,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=0,o=0,p=[],q=function(a,b){if(f){var c=pooch.fetch(b).dom();if(c)return c}else p.push({func:a,arg:b});return null},r=function(){e.reset()},s=function(){e.zoomIn()},t=function(){e.zoomOut()},u=function(){},v=function(){};return b.house=function(a){if(!arguments.length)return f;var c=pooch.fetch(a).dom();c&&(f=c,f.appendChild(d));for(var e=p.length;e--;)p[e].func(p[e].arg);return p=[],g&&pooch.fetch(g).mouseDown(r),h&&pooch.fetch(h).mouseDown(s),i&&pooch.fetch(i).mouseDown(t),j&&pooch.fetch(j).mouseDown(u),k&&pooch.fetch(k).mouseDown(v),b},b.domElem=function(a){return arguments.length?(d=a,b):d},b.target=function(a,c,d){return arguments.length?(e=a,null!==c&&(l=c),null!==d&&(m=d),b):e},b.reset=function(a){return arguments.length?(g=q(b.reset,a),b):g},b.zoomIn=function(a){return arguments.length?(h=q(b.zoomIn,a),b):h},b.zoomOut=function(a){return arguments.length?(i=q(b.zoomOut,a),b):i},b.handle=function(a){return arguments.length?(j=q(b.handle,a),b):j},b.slider=function(a){return arguments.length?(k=q(b.slider,a),b):k},b.top=function(a){return arguments.length?(n=a,pooch.fetch(d).css({top:n+"px"}),b):n},b.left=function(a){return arguments.length?(o=a,pooch.fetch(d).css({left:o+"px"}),b):o},b.update=function(){var a=null!==l?l():e.zoomMin(),c=null!==m?m():e.zoomMax(),d=c-a,f=parseInt(pooch.fetch(k).css("height"),10)/d,g=(c-e.zoom())*f>>0;return pooch.fetch(j).css({top:g+"px"}),b},arguments.length?("string"==typeof a&&null!==document.getElementById(a)&&document.getElementById(a)!==void 0&&(c=document.getElementById(a),d=document.createElement("div"),d.style.borderStyle="none",d.style.borderWidth="0px",d.style.position="absolute",d.style.display="block",d.innerHTML=c.innerHTML,b.domElem(d)),b):b},__popup=function(elem){var _popupScope=this,_domElem=null,_template=null,_house=null,_info=null,_symGrp=null,_x=0,_y=0,_offsetX=0,_offsetY=24,_width=0,_height=0;return _popupScope.house=function(a){if(!arguments.length)return _house;var b=pooch.fetch(a).dom();return b&&(_house=b,_house.appendChild(_domElem)),_popupScope},_popupScope.width=function(a){return arguments.length?(_width=a,_popupScope):_width},_popupScope.height=function(a){return arguments.length?(_height=a,pooch.fetch(_domElem).css({height:_height+"px"}),_popupScope):_height},_popupScope.offsetX=function(a){return arguments.length?(_offsetX=a,_popupScope):_offsetX},_popupScope.offsetY=function(a){return arguments.length?(_offsetY=a,_popupScope):_offsetY},_popupScope.x=function(a){return arguments.length?(_x=a,pooch.fetch(_domElem).css({left:_x+"px"}),_popupScope):_x},_popupScope.y=function(a){return arguments.length?(_y=a,pooch.fetch(_domElem).css({top:_y+"px"}),_popupScope):_y},_popupScope.hide=function(){return pooch.fetch(_domElem).css({top:"-3000px",left:"-3000px"}),_popupScope},_popupScope.layout=function(obj){if(!arguments.length)return _domElem.innerHTML;for(var text=_template.innerHTML,replace=[{text:RegExp(/exec(\s*)\{(.*?)\}/g),chunk:RegExp(/\{(.*?)\}/),js:!0,obj:!1},{text:RegExp(/data\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/data(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0},{text:RegExp(/sym\.(.*?)[^a-zA-Z0-9_]/g),chunk:RegExp(/\.(.*?)[^a-zA-Z0-9_]/),js:!1,obj:!0},{text:RegExp(/sym(\s*)\[(.*?)\]/g),chunk:RegExp(/\[(.*?)\]/),js:!0,obj:!0}],i=replace.length;i--;)for(var matches=text.match(replace[i].text),j=matches?matches.length:0;j--;){var prop=replace[i].chunk.exec(matches[j])[1].replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," "),preDotLen="dat"===matches[0].substr(0,3)?5:"sym"===matches[0].substr(0,3)?3:0,append=replace[i].js?"":matches[j].substr(preDotLen,matches[j].length).match(/[^a-zA-Z0-9_]/),val=replace[i].js?replace[i].obj?5===preDotLen?_info.datum()[obj][eval(prop)]:_sym.datum()[obj][eval(prop)]:eval(prop):5===preDotLen?_info.datum()[obj][prop]:_sym.datum()[obj][prop],appendVal=val+append;text=text.replace(matches[j],appendVal)}return _popupScope.hide(),_domElem.innerHTML=text,_popupScope.width(_domElem.clientWidth),_popupScope.height(_domElem.clientHeight),_popupScope},_popupScope.data=function(a,b){return arguments.length?(null!==a&&a!==void 0&&(_symGrp=a),null!==b&&b!==void 0&&(_info=b),_popupScope):_info},arguments.length?("string"==typeof elem&&null!==document.getElementById(elem)&&document.getElementById(elem)!==void 0&&(_template=document.getElementById(elem),_domElem=document.createElement("div"),_domElem.style.borderStyle="none",_domElem.style.borderWidth="0px",_domElem.style.position="absolute",_domElem.style.display="block"),_popupScope):_popupScope},__data=function(a){var b=this,c=[null],d={},e="",f=!1;return b.key=function(a){if(!arguments.length)return e;var g=c.length,h=0,i=0,j=[];for(e=a;g--;){var k=c[g][a].length;for(j[g]={},k>i&&(h=g,i=k);k--;)j[g][c[g][a][k]]=k}for(;i--;){var l=c[h][a][i];d[l]={};for(var m in c[h])d[l][m]=c[h][m][i];for(g=c.length;g--;)if(g!==h){var n=j[g][l];for(var o in c[g])d[l][o]=c[g][o][n]}}return f=!0,b},b.keys=function(){var a=[];for(var b in d)a.push(b);return a},b.datum=function(a,e){if(!arguments.length)return f?d:c;if(a){if(!e)return f?d[a]:c[a];f?d[a]=e:c[a]=e}return b},arguments.length?(c=a,b):b};pooch_map=function(a,b){var c=this,d=!0,e=!1,f=null,g=[],h=500,i=500,j=null,k={lat:37.090238,lng:-95.7129,zoom:4},l=5,m=18,n=2,p=null,q=null,r=null,s=[],t=null;return c.house=function(a){return arguments.length?(t=pooch.fetch(a).dom(),c):t},c.chart=function(a){return arguments.length?(q=a,c):q},c.draw=function(a){if(q){var b=s.length;if(b){for(;b--;)s[b].func(s[b].arg);s=[]}q.draw(a)}else c.init();return c},c.zoomControl=function(a){return arguments.length?(r=a,r.target(c,null,null),c):r},c.api=function(a){return arguments.length?(d="GOOGLE"===a.toUpperCase()?!0:!1,e="BING"===a.toUpperCase()?!0:!1,c):_api},c.map=function(a){return arguments.length?(f=a,c):f},c.symbolGroup=function(a){if(!arguments.length)return g;if(q){var b=a.length;q.symbolGroup(a);for(var d=0;b>d;++d)g[d]=q.symbolGroup()[d],g[d].map(c)}else s.push({func:c.symbolGroup,arg:a});return c},c.reset=function(){return f&&c.center({lat:k.lat,lng:k.lng}).zoom(k.zoom),c},c.zoom=function(a){return arguments.length?(l=a,f&&(d&&f.getZoom()!=l?f.setZoom(l):e&&f.setView({zoom:l})),c):l},c.zoomMax=function(a){return arguments.length?(m=a,c):m},c.zoomMin=function(a){return arguments.length?(n=a,c):n},c.defaultView=function(a){return arguments.length?(a.lat!==void 0&&(k.lat=a.lat),a.lng!==void 0&&(k.lng=a.lng),a.zoom!==void 0&&(k.zoom=a.zoom),c):k},c.zoomIn=function(){return f&&((d||e)&&(l=f.getZoom()),m>=l+1&&c.zoom(l+1)),c},c.zoomOut=function(){return f&&((d||e)&&(l=f.getZoom()),l-1>=n&&c.zoom(l-1)),c},c.center=function(a){return arguments.length?(j=a,f&&d&&f.setCenter(new google.maps.LatLng(j.lat,j.lng)),c):j},c.width=function(a){return arguments.length?(h=a,c):t?parseInt(pooch.fetch(t).css("width"),10):h},c.height=function(a){return arguments.length?(i=a,c):t?parseInt(pooch.fetch(t).css("height"),10):i},c.loadMap=function(){if(d){var a=[{featureType:"all",elementType:"all",stylers:[{lightness:33},{gamma:.8},{saturation:-61}]},{featureType:"road.local",elementType:"geometry",stylers:[{saturation:-73},{lightness:33},{gamma:.8},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-91},{gamma:.8},{visibility:"simplified"},{lightness:100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"},{saturation:-91},{gamma:.8},{lightness:94}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"simplified"},{gamma:.76}]}],b={disableDefaultUI:!0,zoom:k.zoom,center:new google.maps.LatLng(k.lat,k.lng),mapTypeControlOptions:{mapTypeIds:["poochStyle",google.maps.MapTypeId.ROADMAP]}},g=new google.maps.StyledMapType(a);f=new google.maps.Map(t,b),f.mapTypes.set("poochStyle",g),f.setMapTypeId("poochStyle"),p=new __google_overlay(c)}else e&&(f=new Microsoft.Maps.Map(t,{credentials:"TODO add the option to initialize with credentials",center:new Microsoft.Maps.Location(k.lat,k.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,showDashboard:!1,showScalebar:!1,zoom:k.zoom,height:c.height(),width:c.width()}));r&&(t.appendChild(r.domElem()),r.house(t))},c.init=function(){if(d){var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=pooch_initMapAPIs"),document.body.appendChild(a)}else if(e){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src","http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&onScriptLoad=pooch_initMapAPIs"),document.body.appendChild(b)}return c},arguments.length?(t=pooch.fetch(a).dom())?(pooch_baseMap=c,c):c:c};var __google_overlay=function(a,b){var c=this,d=null,e=a,g=a.map(),h=a.chart(),i=!1,j=null;c.prototype=new google.maps.OverlayView;var k=function(){i=h.mouseIgnore(),h.activeSymbol(null)},l=function(){h.mouseIgnore(!0);var a=c.prototype.getProjection(),b=g.getBounds(),e=new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng()),f=new google.maps.LatLng(d.getNorthEast().lat(),d.getSouthWest().lng()),i=a.fromLatLngToDivPixel(e),j=a.fromLatLngToDivPixel(f),k=i.x-j.x>>0,l=i.y-j.y>>0;pooch.fetch(h.house()).css({top:i.y+"px",left:i.x+"px"}),h.refresh({x:k,y:l,width:h.width(),height:h.height()})},m=function(){o()},n=function(){e.zoomControl()&&e.zoomControl().slider()&&o()
},o=function(){d=g.getBounds();var a=c.prototype.getProjection(),b=google.maps.Point,f=new google.maps.LatLng(d.getNorthEast().lat(),d.getSouthWest().lng()),j=a.fromLatLngToDivPixel(f),k=a.fromDivPixelToLatLng(new b(j.x,j.y)),l=a.fromDivPixelToLatLng(new b(j.x+e.width(),j.y+e.height())),m=k.lng(),n=l.lng(),o=m;m>0&&0>n?o=-180+-1*(180-m):0>m&&0>n&&m>n?o=-360+m:m>0&&n>0&&m>n&&(o=m-360),h.axisMinX(pooch.helpers.lngToMercator(o)).axisMaxX(pooch.helpers.lngToMercator(n)).axisMaxY(pooch.helpers.latToMercator(k.lat())).axisMinY(pooch.helpers.latToMercator(l.lat()));for(var p=e.symbolGroup(),q=p.length;q--;)p[q].shapeData()?p[q].changeList().shapePoints=null:(p[q].changeList().lat=null,p[q].changeList().lng=null);pooch.fetch(h.house()).css({top:j.y+"px",left:j.x+"px",display:"block"}),e.draw(),e.zoom(g.getZoom()),e.zoomControl().update(),i?h.mouseIgnore(!0):h.mouseIgnore(!1)};c.bounds=function(a){return arguments.length?(d=a,c):d},c.prototype.onAdd=function(){var a=document.createElement("div");a.style.borderStyle="none",a.style.borderWidth="0px",a.style.position="absolute",j=a;var b=c.prototype.getPanes();b.overlayMouseTarget.appendChild(a),h=new pooch.chart(a),e.chart(h),h.height(e.height()).width(e.width()),o(),google.maps.event.addListener(g,"dragstart",function(){k()}),google.maps.event.addListener(g,"drag",function(){l()}),google.maps.event.addListener(g,"dragend",function(){m()}),google.maps.event.addListener(g,"zoom_changed",function(){n()})},c.prototype.draw=function(){},c.prototype.onRemove=function(){j.parentNode.removeChild(j),j=null},c.prototype.setMap(g)},__fetch=function(a){var b=this,c=null,d=function(a){return arguments.length?c.currentStyle?c.currentStyle[a]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,"")[a]:c.style[a]:b};return b.css=function(a){if(null!==c&&c!==void 0){var e=function(a){var b=a.split("-"),c=b.length;if(1===c)return b[0];for(var d="-"===a.charAt(0)?b[0].charAt(0).toUpperCase()+b[0].substring(1):b[0],e=1;c>e;e++)d+=b[e].charAt(0).toUpperCase()+b[e].substring(1);return d};if("string"==typeof a)return d(a);if(c.style!==void 0)for(var f in a)_css2js[f]===void 0?c.style[e(f)]=a[f]:c.style[_css2js[f]]=a[f]}return b},b.addClass=function(a){return c.className+=" "+a,c},b.cause=function(a){return c[a]&&"function"==typeof c[a]&&c[a](c),c},b.removeClass=function(a){var b=c.className,d=RegExp("(?:^|\\s)"+a+"(?!\\S)","g"),e=b.replace(d,"");return c.className=e,c},b.dom=function(){return c},b.html=function(a){return arguments.length?(c.innerHTML=a,c):c.innerHTML},b.mouseOver=function(a){return"function"==typeof a&&c.addEventListener("mouseover",function(b){_mouseEvent(c,b,a)},!1),b},b.mouseMove=function(a){return"function"==typeof a&&c.addEventListener("mousemove",function(b){_mouseEvent(c,b,a)},!1),b},b.mouseDown=function(a){return"function"==typeof a&&c.addEventListener("mousedown",function(b){_mouseEvent(c,b,a)},!1),b},b.mouseOut=function(a){return"function"==typeof a&&c.addEventListener("mouseout",function(b){_mouseEvent(c,b,a)},!1),b},b.mouseUp=function(a){return"function"==typeof a&&c.addEventListener("mouseup",function(b){_mouseEvent(c,b,a)},!1),b},b.removeEvent=function(a){return b},arguments.length&&void 0!==a?("string"==typeof a?"#"===a.substr(0,1)?c=document.getElementById(a.substr(1,a.length)):"."===a.substr(0,1)?c=document.getElementsByClassName(a.substr(1,a.length))[0]:null!==document.getElementById(a)&&document.getElementById(a)!==void 0&&document.getElementById(a):(a.tagName||a.nodeName)&&(c=a),b):b};pooch.helpers={keyFromObj:function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null},objectCount:function(a){var b=0;for(var c in a)b++;return b},formatNumber:function(a){return a=""+a,parts=(""+a).split("."),parts[0]=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),parts.join(".")},distanceToPoint:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},latToMercator:function(a){var b=a*(Math.PI/180),c=Math.sin(b),d=3189068.5*Math.log((1+c)/(1-c));return d},lngToMercator:function(a){var b=6378137*.017453292519943*a;return b},indexOf:function(a,b){for(var c=a.length;c--;)if(a[c]===b)return c},valueTween:function(a,b,c,d,e){var f=b-a,g=c;if(!d||1===d||c===d)return b;switch(e){case"linear":return a+f*(c/d);case"easeIn":return f*(g/=d)*g*g+a;case"easeOut":return f*((g=c/d-1)*g*g+1)+a;case"easeInOut":return 1>(g/=d/2)?f/2*g*g*g+a:f/2*((g-=2)*g*g+2)+a;default:return a+f*(c/d)}},parseWebkitMatrix:function(a){var b=/\([0-9epx\.\, \t\-]+/gi,c=a.match(b)[0].substr(1).split(",");return{m11:c[0],m12:c[1],m21:c[2],m22:c[3],tX:c[4],tY:c[5]}},degreesToRadians:function(a){return a*Math.PI/180},pieChart:function(a){var b=function(a){var b=this,c=a,d=function(a,b,d){for(var e=d.length,f=0;e--;){if(d[e]===a)return f;f+=b[d[e]][c]}},e=function(a){var b=a.symbolGroup.data().datum(),e=a.symbolGroup.context(),f=a.symbolGroup.order(),g=d(a.poochID,b,f),h=360*(pooch.helpers.degreesToRadians(g)/100),i=360*(pooch.helpers.degreesToRadians(b[a.poochID][c])/100),j=h+i;return{sAngle:h,eAngle:j,ctx:e}};return b.field=function(a){return arguments.length?(c=a,b):c},b.process=function(a,b){var c=e(a);c.ctx.beginPath(),c.ctx.moveTo(a.x+b.x,a.y+b.y),c.ctx.arc(a.x+b.x,a.y+b.y,a.size,c.sAngle,c.eAngle,!1),c.ctx.closePath(),c.ctx.fill(),c.ctx.stroke()},b.hitTest=function(a,b){var c=e(a),d=a.x+b.x,f=a.y+b.y,g=Math.sqrt(Math.pow(d,2)+Math.pow(f,2));if(a.size>g){var h=Math.atan2(f,d)+Math.PI;if(h>=c.sAngle&&c.eAngle>=h)return!0}return!1},b};return new b(a)},forceDirected:function(a){var b=function(){var v,w,x,b=this,c={},d={},e=[],f=[],g=1e3,h=function(){return!1},i=5,j=.75,k=1e5,l=600,m=600,n=2e3,o=!1,p=null,q=1e-6,r=0,s=0,t=0,u=0;b.attraction=function(a){return arguments.length?h(i=a)||b:i},b.repulsion=function(a){return arguments.length?h(j=a)||b:j},b.iterations=function(a){return arguments.length?h(k=a)||b:k},b.width=function(a){return arguments.length?h(l=a)||b:l},b.height=function(a){return arguments.length?h(m=a)||b:m},b.depth=function(a){return arguments.length?h(n=a)||b:n},b.done=function(a){return arguments.length?h(o=a)||b:o},b.nodes=function(a){return arguments.length?h(c=a)||b:c},b.edges=function(a){return arguments.length?h(d=a)||b:d},b.nodeIDs=function(a){return arguments.length?h(e=a)||b:e},b.edgeIDs=function(a){return arguments.length?h(f=a)||b:f},b.nodeLimit=function(a){return arguments.length?h(g=a)||b:g},b.edge=function(a,b){var c=this;c.start=a,c.dest=b,c.data={},c.toLayout=function(){return c.start.connectTo(c.dest)?(f.push(c.dest.id),d[c.dest.id]=c,!0):!1}},b.node=function(a){var b=this;b.id=a,b.nodesTo=[],b.nodesFrom=[],b.pos={},b.data={},b.connectTo=function(a){return b.isConnected(a)?!1:(b.nodesTo.push(a),!0)},b.isConnected=function(a){for(var c=b.nodesTo.length;c--;){var d=b.nodesTo[c];if(d.id==a.id)return!0}return!1},b.toLayout=function(){return c[b.id]===void 0&&g>=e.length?(e.push(b.id),c[b.id]=b,!0):!1}},b.build=function(){o=!1,s=l/10,t=e.length,u=f.length,x=Math.sqrt(m*l/t),v=i*x,w=j*x},b.update=function(){var a=t,b=u,g=a;if(!(k>r&&s>1e-6))return o=!0,!1;for(;a--;){var h=a+1,i=c[e[a]];for(i.layout=i.layout||{},a===t-1&&(i.layout.offX=0,i.layout.offY=0,i.layout.offZ=0),i.layout.force=0,i.layout.tmpPosX=i.layout.tmpPosX||i.pos.x,i.layout.tmpPosY=i.layout.tmpPosY||i.pos.y,i.layout.tmpPosZ=i.layout.tmpPosZ||i.pos.z;h--;){var j=c[e[h]];if(a!==h){j.layout=j.layout||{},j.layout.tmpPosX=j.layout.tmpPosX||j.pos.x,j.layout.tmpPosY=j.layout.tmpPosY||j.pos.y,j.layout.tmpPosZ=j.layout.tmpPosZ||j.pos.z;var l=i.layout.tmpPosX-j.layout.tmpPosX,m=i.layout.tmpPosY-j.layout.tmpPosY,n=i.layout.tmpPosZ-j.layout.tmpPosZ,x=Math.max(q,Math.sqrt(l*l+m*m)),y=Math.max(q,Math.sqrt(n*n+m*m)),z=w*w/x,A=w*w/y;i.layout.force+=z,j.layout.force+=z,i.layout.offX+=l/x*z,i.layout.offY+=m/x*z,i.layout.offZ+=n/y*A,a===t-1&&(j.layout.offX=0,j.layout.offY=0,j.layout.offZ=0),j.layout.offX-=l/x*z,j.layout.offY-=m/x*z,j.layout.offZ-=n/y*A}}}for(;b--;){var B=d[f[b]],C=B.start.layout,D=B.dest.layout,E=C.tmpPosX-D.tmpPosX,F=C.tmpPosY-D.tmpPosY,G=C.tmpPosZ-D.tmpPosZ,H=Math.max(q,Math.sqrt(E*E+F*F)),I=Math.max(q,Math.sqrt(G*G+F*F)),J=H*H/v,K=I*I/v;C.eFrc-=J,D.eFrc+=J,C.offX-=E/H*J,C.offY-=F/H*J,C.offZ-=G/I*K,D.offX+=E/H*J,D.offY+=F/H*J,D.offZ+=G/I*K}for(;g--;){var L=c[e[g]],M=L.layout,N=Math.max(q,Math.sqrt(M.offX*M.offX+M.offY*M.offY)),O=Math.max(q,Math.sqrt(M.offZ*M.offZ+M.offY*M.offY));M.tmpPosX+=M.offX/N*Math.min(N,s),M.tmpPosY+=M.offY/N*Math.min(N,s),M.tmpPosZ+=M.offZ/O*Math.min(O,s),L.pos.x-=(L.pos.x-M.tmpPosX)/10,L.pos.y-=(L.pos.y-M.tmpPosY)/10,L.pos.z-=(L.pos.z-M.tmpPosZ)/10,"function"==typeof p&&p(L)}return s*=1-r/k,r++,!0}};return new b(a)}},window.pooch_initMapAPIs=function(){pooch_baseMap.loadMap()},window.pooch_baseMap=null;var _isSafari="object"==typeof navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")?!0:!1,_chartNdx=0,_css2js={"float":"styleFloat","text-decoration: blink":"textDecorationBlink","text-decoration: line-through":"textDecorationLineThrough","text-decoration: none":"textDecorationNone","text-decoration: overline":"textDecorationOverline","text-decoration: underline":"textDecorationUnderline"},_mouseEvent=function(a,b,c){if(a.getBoundingClientRect){var d=a.getBoundingClientRect(),e=d.left,f=d.top;b.localX=b.clientX-e,b.localY=b.clientY-f}c(b)};pooch.log("pooch.js v"+pooch.version)})();